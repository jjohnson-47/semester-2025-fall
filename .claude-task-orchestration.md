# Claude Code Task Tool Orchestration System

## Semester Management Platform - Fall 2025

## Configuration Date: August 24, 2025

---

## üéØ Claude Code Agent Team Configuration

This file configures Claude Code's native Task tool to use specialized agents with the `subagent_type` parameter for coordinated semester preparation automation.

### Agent Registry

```yaml
specialized_agents:
  course-content:
    capabilities: ["syllabi", "schedules", "materials", "rsi_compliance"]
    auto_triggers: ["content/courses/**/*.json", "rsi_updates", "schedule_modifications"]
    primary_functions: ["validate_json", "generate_syllabi", "build_schedules", "ensure_rsi_compliance"]

  qa-validator:
    capabilities: ["validation", "consistency", "integrity", "pre_deploy_checks"]
    auto_triggers: ["pre_commit", "pre_deployment", "schedule_changes", "data_modifications"]
    primary_functions: ["json_validation", "date_consistency", "cross_reference_checks", "quality_gates"]

  deploy-manager:
    capabilities: ["cloudflare_pages", "build_pipeline", "deployment", "manifest_validation"]
    auto_triggers: ["push_to_main", "pr_creation", "deployment_requests", "build_artifacts"]
    primary_functions: ["build_site", "validate_manifest", "check_csp_headers", "deploy_to_cloudflare"]

  docs-keeper:
    capabilities: ["documentation", "indexing", "decision_tracking", "architecture_docs"]
    auto_triggers: ["structural_changes", "new_features", "config_updates", "agent_modifications"]
    primary_functions: ["update_indexes", "maintain_docs", "track_decisions", "sync_readme"]

  calendar-sync:
    capabilities: ["calendar_management", "date_propagation", "deadline_tracking", "conflict_detection"]
    auto_triggers: ["date_changes", "holiday_updates", "deadline_modifications", "semester_adjustments"]
    primary_functions: ["generate_calendar", "propagate_dates", "verify_no_conflicts", "update_due_dates"]
```

---

## üîÑ Task Tool Integration Patterns

### Automatic Task Creation with TodoWrite

```python
# When Claude Code encounters complex multi-step operations
task_creation_triggers = {
    "file_changes_count": 3,  # Auto-create todos for 3+ file changes
    "agent_coordination": "always",  # Always use todos when multiple agents needed
    "deployment_pipeline": "always",  # Track deployment stages
    "validation_errors": "auto_fix_todos",  # Create fix tasks automatically
}

# TodoWrite task templates with agent assignments
task_templates = {
    "semester_prep": [
        {"content": "Validate all course data", "agent": "qa-validator", "priority": "critical"},
        {"content": "Generate updated syllabi", "agent": "course-content", "priority": "high"},
        {"content": "Build course schedules", "agent": "course-content", "priority": "high"},
        {"content": "Deploy to preview environment", "agent": "deploy-manager", "priority": "medium"},
        {"content": "Update documentation", "agent": "docs-keeper", "priority": "low"}
    ],

    "content_update": [
        {"content": "Validate JSON schema compliance", "agent": "qa-validator", "priority": "critical"},
        {"content": "Rebuild affected course materials", "agent": "course-content", "priority": "high"},
        {"content": "Check for date conflicts", "agent": "calendar-sync", "priority": "high"},
        {"content": "Deploy updated content", "agent": "deploy-manager", "priority": "medium"}
    ],

    "emergency_fix": [
        {"content": "Assess damage and identify affected files", "agent": "qa-validator", "priority": "critical"},
        {"content": "Restore from git history if needed", "agent": "deploy-manager", "priority": "critical"},
        {"content": "Rebuild all affected materials", "agent": "course-content", "priority": "high"},
        {"content": "Emergency deploy to production", "agent": "deploy-manager", "priority": "high"},
        {"content": "Update incident documentation", "agent": "docs-keeper", "priority": "medium"}
    ]
}
```

### Task Tool Usage Examples

```python
# Using Claude Code's Task tool with subagent_type
def orchestrate_semester_preparation():
    """
    Example of how Claude Code's Task tool coordinates agents
    """
    # Create todo list for complex multi-agent operation
    TodoWrite([
        {"content": "Run full data validation", "agent": "qa-validator", "status": "pending"},
        {"content": "Generate all course materials", "agent": "course-content", "status": "pending"},
        {"content": "Deploy to production", "agent": "deploy-manager", "status": "pending"},
        {"content": "Update project documentation", "agent": "docs-keeper", "status": "pending"}
    ])

    # Execute with Task tool using subagent_type
    Task("Run comprehensive semester preparation", subagent_type="qa-validator")
    # qa-validator completes ‚Üí automatically triggers course-content

    Task("Build all course materials after validation", subagent_type="course-content")
    # course-content completes ‚Üí automatically triggers deploy-manager

    Task("Deploy validated materials to production", subagent_type="deploy-manager")
    # deploy-manager completes ‚Üí automatically triggers docs-keeper

    Task("Document deployment and update indexes", subagent_type="docs-keeper")

# Automatic agent coordination based on file changes
def handle_content_change(changed_files):
    """
    Automatic orchestration triggered by file changes
    """
    if any("content/courses" in f for f in changed_files):
        # Primary agent
        Task("Validate and rebuild course content", subagent_type="course-content")

        # Secondary validation
        Task("Verify content integrity and consistency", subagent_type="qa-validator")

        # Update calendar if dates changed
        if any("due_dates.json" in f for f in changed_files):
            Task("Sync calendar and check for conflicts", subagent_type="calendar-sync")
```

---

## üìã Smart Task Delegation

### Agent Selection Logic

```yaml
task_routing:
  # Primary responsibility mapping
  file_patterns:
    "content/courses/**/*.json": course-content
    "variables/semester.json": calendar-sync
    "templates/**/*.j2": course-content
    ".github/workflows/*.yml": deploy-manager
    "docs/**/*.md": docs-keeper

  # Task type mapping
  task_types:
    "validation": qa-validator
    "generation": course-content
    "deployment": deploy-manager
    "documentation": docs-keeper
    "calendar": calendar-sync

  # Complexity routing
  simple_tasks: "direct_execution"
  medium_tasks: "primary_agent ‚Üí validation_agent"
  complex_tasks: "full_agent_chain"
```

### Dependency Chains

```yaml
agent_workflows:
  content_update:
    1. course-content ‚Üí "generate materials"
    2. qa-validator ‚Üí "validate outputs"
    3. deploy-manager ‚Üí "deploy changes"
    4. docs-keeper ‚Üí "update documentation"

  calendar_change:
    1. calendar-sync ‚Üí "propagate new dates"
    2. course-content ‚Üí "rebuild affected schedules"
    3. qa-validator ‚Üí "verify no conflicts"
    4. deploy-manager ‚Üí "deploy updated materials"

  deployment_pipeline:
    1. qa-validator ‚Üí "pre-deploy validation"
    2. deploy-manager ‚Üí "build and deploy"
    3. qa-validator ‚Üí "post-deploy verification"
    4. docs-keeper ‚Üí "update deployment log"
```

---

## üöÄ Orchestration Commands

### Quick Agent Commands

```bash
# Direct agent invocation using Task tool
Task("Full system validation", subagent_type="qa-validator")
Task("Rebuild MATH221 materials", subagent_type="course-content")
Task("Deploy to preview environment", subagent_type="deploy-manager")
Task("Update architecture documentation", subagent_type="docs-keeper")
Task("Sync all course calendars", subagent_type="calendar-sync")

# Complex orchestration with TodoWrite tracking
TodoWrite + Task("Complete semester preparation workflow", subagent_type="course-content")
# Automatically creates todo list and coordinates all agents in sequence
```

### Workflow Shortcuts

```bash
# Morning routine
@prep-check ‚Üí Task("Morning validation and deadline check", subagent_type="qa-validator")
              + Task("Check today's deadlines", subagent_type="calendar-sync")

# Content update workflow
@update-content ‚Üí TodoWrite(content_update_template)
                  + Task("Execute content update pipeline", subagent_type="course-content")

# Emergency procedures
@emergency ‚Üí TodoWrite(emergency_fix_template)
             + Task("Emergency response protocol", subagent_type="qa-validator")
```

---

## üîç Monitoring & Learning

### Agent Performance Tracking

```yaml
metrics:
  task_completion_rate: 95%
  average_agent_response_time: "<30s"
  cross_agent_coordination_success: 98%
  automatic_trigger_accuracy: 92%

monitoring:
  agent_workload_distribution: "balanced"
  dependency_chain_efficiency: "optimized"
  error_recovery_success: "automated"
  learning_pattern_accuracy: "improving"
```

### Continuous Improvement

```yaml
learning_patterns:
  frequent_sequences:
    - qa-validator ‚Üí course-content ‚Üí deploy-manager
    - calendar-sync ‚Üí course-content ‚Üí qa-validator
    - deploy-manager ‚Üí docs-keeper

  optimization_opportunities:
    - parallel_execution: ["qa-validator", "docs-keeper"]
    - batch_processing: ["multiple_course_updates"]
    - cache_utilization: ["validation_results"]

  adaptation_triggers:
    - new_error_patterns: "update_agent_logic"
    - efficiency_degradation: "optimize_workflows"
    - user_feedback: "adjust_automation_level"
```

---

## üéì Course-Specific Agent Behaviors

### MATH221 (MyOpenMath Integration)

```yaml
agent_specializations:
  course-content: "friday_deadline_pattern", "weekly_discussion_setup"
  qa-validator: "myopenmath_id_validation", "discussion_topic_verification"
  calendar-sync: "friday_due_date_enforcement"
```

### MATH251 (Edfinity Complex Schedule)

```yaml
agent_specializations:
  course-content: "varied_due_date_handling", "written_problem_mondays"
  qa-validator: "week9_no_quiz_validation", "complex_schedule_verification"
  calendar-sync: "irregular_pattern_management"
```

### STAT253 (Pearson MyLab + R Integration)

```yaml
agent_specializations:
  course-content: "r_assignment_integration", "final_report_component"
  qa-validator: "blackboard_ultra_lti_verification", "r_code_validation"
  deploy-manager: "pearson_mylab_compatibility_checks"
```

---

## üîê Security & Quality Gates

### Pre-Execution Validation

```yaml
quality_gates:
  pre_agent_execution:
    - verify_agent_permissions
    - check_data_integrity
    - validate_dependencies
    - confirm_backup_status

  cross_agent_coordination:
    - prevent_conflicting_operations
    - ensure_sequential_consistency
    - validate_shared_state
    - coordinate_resource_access

  post_execution_verification:
    - validate_outputs
    - update_state_tracking
    - log_performance_metrics
    - trigger_next_agents
```

---

*This configuration enables Claude Code's native Task tool to coordinate the 5 specialized agents (course-content, qa-validator, deploy-manager, docs-keeper, calendar-sync) for intelligent, automated semester management with comprehensive TodoWrite progress tracking.*
